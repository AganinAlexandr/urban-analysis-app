# Руководство по поддерживаемым форматам файлов

## CSV файлы

### Поддерживаемые поля:
- `group` - группа объекта (school, hospital, pharmacy, etc.)
- `name` - название объекта
- `object_name` - название объекта (автоматически мапится в `name`)
- `address` - адрес объекта
- `review_text` - текст отзыва
- `review_date` - дата отзыва (автоматически мапится в `date`)
- `user_name` - имя пользователя
- `review_rating` - рейтинг отзыва (автоматически мапится в `rating`)
- `answer_text` - текст ответа
- `object_rating` - рейтинг объекта (автоматически мапится в `rating_object`)
- `review_count` - счетчик отзывов (автоматически мапится в `review_count_from_api`)
- `source` - источник данных

### Особенности:
- Поддержка кавычек и произвольного порядка полей
- Автоматическая очистка текстовых полей
- Фильтрация только поддерживаемых полей

## JSON файлы

### Структура 1: Простой объект
```json
{
  "group": "school",
  "name": "Школа №123",
  "address": "ул. Ленина, 15",
  "review_text": "Отличная школа!",
  "date": "2024-01-15",
  "user_name": "Родитель_1",
  "rating": 5
}
```

### Структура 2: Company Info + Reviews
```json
{
  "company_info": {
    "name": "Школа №456",
    "rating": 4.8,
    "stars": 4.8
  },
  "company_reviews": [
    {
      "name": "Родитель_А",
      "date": 1705276800,
      "text": "Отличная школа!",
      "stars": 5,
      "answer": "Спасибо!"
    }
  ]
}
```

### Особенности JSON:
- Поддержка отдельных файлов и целых каталогов
- Автоматическое преобразование Unix-времени в даты
- Извлечение группы объекта из пути к файлу
- Разворачивание `company_reviews` с добавлением данных из `company_info`

## Excel файлы

### Поддерживаемые поля:
- `group` - группа объекта
- `object_name` - название объекта (мапится в `name`)
- `address` - адрес объекта
- `review_text` - текст отзыва
- `review_date` - дата отзыва (мапится в `date`)
- `user_name` - имя пользователя
- `review_rating` - рейтинг отзыва (мапится в `rating`)
- `answer_text` - текст ответа
- `object_rating` - рейтинг объекта (мапится в `rating_object`)
- `review_count` - счетчик отзывов (мапится в `review_count_from_api`)
- `source` - источник данных

### Особенности Excel:
- Выбор листа для обработки
- Фильтрация данных по полям
- Анализ структуры файла
- Поддержка форматов .xlsx и .xls

## Обязательные поля для обработки:
- `group` - группа объекта
- `review_text` - текст отзыва

## Обязательные поля для сохранения в архив:
- `group` - группа объекта
- `name` - название объекта
- `address` - адрес объекта
- `review_text` - текст отзыва
- `date` - дата отзыва

## Группы объектов:
- `resident_complexes` - жилые комплексы
- `school` - школы
- `hospital` - больницы
- `pharmacy` - аптеки
- `kindergarden` - детские сады
- `polyclinic` - поликлиники
- `university` - университеты
- `shopmall` - торговые центры 