# Отчет о добавлении GUI для управления ключевыми словами

## Обзор

Добавлена возможность управления ключевыми словами через веб-интерфейс приложения. Теперь пользователи могут перегенерировать ключевые слова и обновлять определенные группы прямо из браузера.

## Что было добавлено

### 1. Backend API endpoints

**Файл:** `app.py`

Добавлены новые API endpoints:

- **`/api/keywords/regenerate`** (POST) - перегенерирует ключевые слова на основе текущих данных
- **`/api/keywords/update-groups`** (POST) - обновляет detected_groups на основе текущих ключевых слов  
- **`/api/keywords/status`** (GET) - получает статус ключевых слов и статистику

### 2. Frontend интерфейс

**Файл:** `templates/index.html`

Добавлена новая панель "Управление ключевыми словами" с кнопками:

- **Перегенерировать ключевые слова** - запускает анализ данных и создает новые ключевые слова
- **Обновить группы** - применяет текущие ключевые слова для определения групп объектов
- **Статус ключевых слов** - показывает статистику по ключевым словам и объектам
- **Информация** - отображает детальную информацию

### 3. JavaScript функции

Добавлены функции для работы с ключевыми словами:

- `regenerateKeywords()` - перегенерирует ключевые слова
- `updateDetectedGroups()` - обновляет определенные группы
- `getKeywordsStatus()` - получает статус и статистику
- `showKeywordsInfo()` - показывает/скрывает информацию

## Как это работает

### Процесс перегенерации ключевых слов:

1. Пользователь нажимает "Перегенерировать ключевые слова"
2. Система анализирует все данные в БД (названия объектов + отзывы)
3. Извлекает наиболее частые слова для каждой группы
4. Исключает слова, которые встречаются в других группах
5. Сохраняет уникальные ключевые слова в таблицу `simple_enhanced_keywords`

### Процесс обновления групп:

1. Пользователь нажимает "Обновить группы"
2. Система применяет алгоритм определения групп ко всем объектам
3. Обновляет поле `detected_group_id` в таблице `objects`
4. Автоматически обновляет карту для отображения изменений

### Статистика:

Система показывает:
- Количество ключевых слов по группам
- Общее количество объектов
- Количество определенных/неопределенных групп
- Процент успешного определения групп

## Преимущества

1. **Удобство использования** - не нужно запускать скрипты вручную
2. **Визуальная обратная связь** - пользователь видит прогресс и результаты
3. **Интеграция с картой** - изменения сразу отображаются на карте
4. **Безопасность** - подтверждение перед выполнением операций
5. **Статистика** - возможность отслеживать эффективность алгоритма

## Использование

1. Откройте веб-интерфейс приложения
2. Найдите панель "Управление ключевыми словами"
3. Нажмите "Статус ключевых слов" для просмотра текущего состояния
4. При необходимости нажмите "Перегенерировать ключевые слова"
5. После генерации нажмите "Обновить группы"
6. Проверьте результаты на карте

## Технические детали

- Все операции выполняются асинхронно через AJAX
- Пользователь получает уведомления о статусе операций
- Ошибки обрабатываются и отображаются пользователю
- Карта автоматически обновляется после изменений групп 