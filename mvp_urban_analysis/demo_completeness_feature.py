#!/usr/bin/env python3
"""
–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–∏–∞–≥—Ä–∞–º–º—ã –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏ –ø–æ–ª–µ–π
"""

import requests
import json
import time

def demo_completeness_feature():
    """–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏"""
    
    print("üéØ –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø –ù–û–í–û–ô –§–£–ù–ö–¶–ò–û–ù–ê–õ–¨–ù–û–°–¢–ò")
    print("=" * 50)
    print()
    print("‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –¥–∏–∞–≥—Ä–∞–º–º–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏ –ø–æ–ª–µ–π –≤ –∞—Ä—Ö–∏–≤–µ")
    print("‚úÖ –ù–æ–≤—ã–π –º–∞–∫–µ—Ç —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞ –¥–≤–µ –∫–æ–ª–æ–Ω–∫–∏")
    print("‚úÖ –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è —É—Ä–æ–≤–Ω—è –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏")
    print("‚úÖ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ —Å Chart.js")
    print()
    
    try:
        # –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∞—Ä—Ö–∏–≤–µ
        response = requests.get('http://localhost:5000/archive/info')
        
        if response.status_code == 200:
            data = response.json()
            
            print("üìä –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï –ê–†–•–ò–í–ê:")
            print(f"   –í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π: {data['total_records']}")
            print(f"   –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥—Ä—É–ø–ø: {len(data['groups'])}")
            print()
            
            print("üìà –ó–ê–ü–û–õ–ù–ï–ù–ù–û–°–¢–¨ –ü–û–õ–ï–ô:")
            field_names = {
                'review_text': '–¢–µ–∫—Å—Ç –æ—Ç–∑—ã–≤–∞',
                'rating': '–†–µ–π—Ç–∏–Ω–≥',
                'answer_text': '–û—Ç–≤–µ—Ç',
                'latitude': '–®–∏—Ä–æ—Ç–∞',
                'longitude': '–î–æ–ª–≥–æ—Ç–∞',
                'district': '–†–∞–π–æ–Ω'
            }
            
            for field, percentage in data['field_completeness'].items():
                display_name = field_names.get(field, field)
                if percentage >= 80:
                    status = "üü¢ –û—Ç–ª–∏—á–Ω–æ"
                elif percentage >= 50:
                    status = "üü° –•–æ—Ä–æ—à–æ"
                else:
                    status = "üî¥ –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è"
                
                print(f"   {display_name}: {percentage}% {status}")
            
            print()
            print("üé® –û–°–û–ë–ï–ù–ù–û–°–¢–ò –ù–û–í–û–ì–û –ò–ù–¢–ï–†–§–ï–ô–°–ê:")
            print("   ‚Ä¢ –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –æ—Å–Ω–æ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞—Ä—Ö–∏–≤–∞")
            print("   ‚Ä¢ –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –¥–∏–∞–≥—Ä–∞–º–º–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏ –ø–æ–ª–µ–π")
            print("   ‚Ä¢ –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è: –∑–µ–ª–µ–Ω—ã–π (>80%), –∂–µ–ª—Ç—ã–π (50-80%), –∫—Ä–∞—Å–Ω—ã–π (<50%)")
            print("   ‚Ä¢ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ —Å –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏")
            print("   ‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö")
            print()
            print("üåê –î–õ–Ø –ü–†–û–°–ú–û–¢–†–ê:")
            print("   1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä")
            print("   2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ http://localhost:5000")
            print("   3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞—Ä—Ö–∏–≤–µ'")
            print("   4. –£–≤–∏–¥–∏—Ç–µ –Ω–æ–≤—ã–π –º–∞–∫–µ—Ç —Å –¥–∏–∞–≥—Ä–∞–º–º–æ–π")
            print()
            print("‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!")
            
            return True
        else:
            print(f"‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö: HTTP {response.status_code}")
            return False
            
    except requests.exceptions.ConnectionError:
        print("‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É")
        print("   –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ: python app.py")
        return False
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞: {e}")
        return False

def main():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è"""
    
    print("–ó–∞–ø—É—Å–∫ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏...")
    print("–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ –Ω–∞ http://localhost:5000")
    print()
    
    time.sleep(1)
    
    if demo_completeness_feature():
        print("\nüéâ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!")
        return True
    else:
        print("\nüí• –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –Ω–µ —É–¥–∞–ª–∞—Å—å!")
        return False

if __name__ == "__main__":
    main() 